# Arquivo: calculadora.kv

#:import webbrowser webbrowser

MDScreenManager:
    MainScreen:
    SettingsScreen:

<CalcButton@MDButton>:
    style: "tonal"
    font_size: "24sp"
    # Os botões agora se expandem para preencher o grid
    size_hint: 1, 1
    
    MDButtonText:
        text: root.text

<MainScreen>:
    name: "main"

    MDBoxLayout:
        orientation: 'vertical'
        padding: "16dp"
        spacing: "16dp"

        # Botão de configurações no topo
        MDIconButton:
            icon: "cog"
            pos_hint: {"right": 1}
            on_release: app.change_screen("settings")

        # Display da calculadora
        MDTextField:
            id: display
            text: '0'
            font_size: '48sp'
            halign: 'right'
            mode: "outlined"
            readonly: True # Impede o teclado de abrir
            size_hint_y: None
            height: "100dp"
        
        # Grid para os botões da calculadora
        MDGridLayout:
            cols: 4
            spacing: "8dp"
            size_hint_y: 1.5 # Dá mais espaço vertical para a área dos botões

            # Linha 1
            CalcButton:
                text: "AC"
                on_release: app.clear_all()
            CalcButton:
                text: "%"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "backspace"
                icon: "backspace-outline"
                on_release: app.backspace()
            CalcButton:
                text: "÷"
                on_release: app.on_button_click(self.text)
            
            # Linha 2
            CalcButton:
                text: "7"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "8"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "9"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "x"
                on_release: app.on_button_click(self.text)

            # Linha 3
            CalcButton:
                text: "4"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "5"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "6"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "-"
                on_release: app.on_button_click(self.text)
            
            # Linha 4
            CalcButton:
                text: "1"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "2"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "3"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "+"
                on_release: app.on_button_click(self.text)
                
            # Linha 5
            CalcButton:
                text: "00"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "0"
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: ","
                on_release: app.on_button_click(self.text)
            CalcButton:
                text: "="
                style: "filled" # Botão de igual com destaque
                on_release: app.calculate()


<SettingsScreen>:
    name: "settings"

    MDBoxLayout:
        orientation: 'vertical'
        padding: "16dp"
        spacing: "24dp"

        MDTopAppBar:
            title: "Configurações"
            use_title_centered: True
            left_action_items: [["arrow-left", lambda x: app.change_screen("main")]]

        MDCard:
            orientation: 'horizontal'
            padding: "16dp"
            size_hint_y: None
            height: "64dp"
            radius: "12dp"
            
            MDLabel:
                text: "Modo Escuro"
                adaptive_size: True
                pos_hint: {"center_y": 0.5}

            MDSwitch:
                pos_hint: {"center_y": 0.5}
                on_active: app.toggle_theme(self, self.active)

        MDCard:
            orientation: 'horizontal'
            padding: "16dp"
            size_hint_y: None
            height: "64dp"
            radius: "12dp"
            on_release: app.open_link()

            MDIcon:
                icon: "github"
                pos_hint: {"center_y": 0.5}
            
            MDLabel:
                text: "Criador do app: @Mayc00m"
                adaptive_size: True
                pos_hint: {"center_y": 0.5}
        
        # Espaçador para empurrar o conteúdo para cima
        MDFloatLayout: